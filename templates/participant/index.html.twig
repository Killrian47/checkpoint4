{% extends 'base.html.twig' %}

{% block title %}Participant index{% endblock %}

{% block body %}
    <h1>Participant index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Email</th>
                <th>Firstname</th>
                <th>Lastname</th>
            </tr>
        </thead>
        <tbody>
        {% set userIsInParticipant = false %}
        {% for participant in participants %}
            {% if app.user.email == participant.email %}
                {% set userIsInParticipant = true %}
            {% endif %}
            <tr>
                <td>{{ participant.id }}</td>
                <td>{{ participant.email }}</td>
                <td>{{ participant.firstname }}</td>
                <td>{{ participant.lastname }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{#    <a href="{{ path('app_participant_new') }}">Create new</a>#}
    {% if userIsInParticipant == true %}
    <p>You're already join the draw</p>
    {% else %}
    <a href="{{ path('app_join_participant') }}">Join the draw</a>
    {% endif %}

    <a href="{{ path('app_start_random') }}">Get a looser !</a>

    <a href="{{ path('app_reset_participant') }}">Reset the game</a>
{% endblock %}
